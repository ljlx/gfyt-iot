## 目录

[TOC]



### 名词解释:

#### 设备
    设备是连通多个控制对象的一个控制设备,其上可以挂载多个控制对象进行协同工作.

#### 子设备
    子设备是一个抽象的概念,是对点位多个不同的属性,使用相关的传感器(也许也是个控制对象),进行对控制对象目标进行协同工作.

#### 控制对象
    所谓的控制对象,即是要被iOT网关控制的电子设备比如单色灯泡,RGB灯泡,门,风扇等,其抽象概念是点位

#### 点位
    控制对象的抽象概念,用于将实际物理设备和程序隔离抽象出来,起到接耦的作用. 一个点位具有多个属性,一个属性对应一个子设备

### 设备相关信息表

####  控制对象表  
> 一个点位对应一个控制对象, 每一个控制对象一条记录,比如 一个RGB灯泡就是一个控制对象,一个电风扇也是一个控制对象

|id | 型号代码 | 设备硬件版本| 设备驱动程序版本| 设备驱动程序路径 |设备上次退出状态 |设备控制状态(禁用等)|
|:---:|:---:|:---:|:---:|:---:|:---:|:---:|
| D-1 | pps1    |  v1.1   |       v1.2   |    /path/executable | 0      |      0|

#### 控制对象详细信息表
>用来暂时设备详细信息的场景,平常程序逻辑控制不需要的部分,减少内存GC压力

|id | 制造商    |    网站  |    添加时间 | 添加用户 |
|:---:|:---:|:---:|:---:|:---:|
|D-1 | pps厂家信息 |  http-web | 2019-01  |root|


#### 点位信息表 
>主要使用来和业务逻辑关联的表

|id | 点位类型 | 点位名称|点位状态|
|:---:|:---:|:---:|:---:|
|p-1  | 灯泡  |  灯泡名称 |启用|

---


#### 点位-控制对象映射表

| 	id|  点位id |  控制对象id| 状态|
|:---:|:---:|:---:|:---:|
|1  |  p-1  |    D-1    |   有效|

#### 子设备表(sub-device)

| 子设备id | 数据类型 | 状态 |
| :------: | :------: | :--: |
|   sd-1   |   byte   | 有效 |
|   sd-2   | 是string | 有效 |



#### 点位属性表

> 一个控制对象(点位)具有多个属性,比如开关量,状态量,模拟量等.一个属性一条记录

|   属性id | 控制对象id  |   控制对象属性类型code| 设备透传参数 |
|:---:|:---:|:---:|:---:|
|   1 |  D-1  | 开关code|自定义参数1|
| 2 |  D-1   | 模拟量调光code|自定义参数1|

 

#### 点位属性-子设备关系表

> 一个点位的功能完成需要多个点位属性相互协助完成,一个点位属性对应一个子设备.

|  id  | 点位属性id | 子设备id |
| :--: | :--------: | :------: |
|  1   |     1      |   sd-1   |

